<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus Faux Pas Bookmarklet</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet" type="text/css">
    <style>
        html {
            box-sizing: border-box;
            -moz-text-size-adjust: none;
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
            font-size: 100%;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }
        body, h1, h2, h3, h4, h5, h6, p,
        figure, blockquote, dl, dd {
            margin-block-end: 0;
        }
        img, picture, video, canvas, svg {
            display: block;
            max-width: 100%;
        }
        input, button, textarea, select {
            font-family: inherit;
            font-size: inherit;
        }
        h1, h2, h3, h4, h5, h6
        button, input, label {
            line-height: 1.1;
        }
        h1, h2,
        h3, h4, 
        h5, h6 {
            text-wrap: balance;
        }
        a:not([class]) {
            text-decoration-skip-ink: auto;
            color: currentColor;
        }

        body {
            padding:10%;
            font-family: 'Open Sans', sans-serif;
        }
        
        h1 {
            font-weight: 600;
            font-size: 2.25rem;
        }

        h2 {
            font-weight: 600;
            font-size: 1.75rem;
        }
            
    </style>
</head>

<body>
    <h1>Focus Faux Pas - your friendly accessibility bookmarklet superhero!</h1>

    <h2>What is Focus Faux Pas?</h2>
    <p>Focus Faux Pas is a handy bookmarklet designed to help you ensure that the focus appearance of focusable elements on a web page complies with <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-appearance.html" rel="nofollow">Focus Appearance (Level AAA) WCAG Guideline</a>. It checks elements like buttons, links, and more, ensuring their focus is as sharp as a tack according to the Web Content Accessibility Guidelines (WCAG).</p>

    <h2>How Does it Work?</h2>
    <p>Focus Faux Pas calculates the minimum and actual focus areas for focusable elements, taking into account style details like outline width and offset. It then provides a visual indicator to show if each element's focus game is up to snuff or needs a little extra love.</p>

    <h2>How to Use</h2>

    <p>Drag this link to your browser toolbar: <a id="bookmarklet-a" class="bookmarklet" href="javascript:(function()%7Bjavascript%3A(function()%20%7B%0A%20%20%20%20var%20indicatorContainer%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20Function%20to%20create%20the%20indicator%20container%0A%20%20%20%20function%20createIndicatorContainer()%20%7B%0A%20%20%20%20%20%20%20%20indicatorContainer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.position%20%3D%20%22fixed%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.top%20%3D%20%2210px%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.right%20%3D%20%2210px%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.backgroundColor%20%3D%20%22rgba(0%2C%200%2C%200%2C%200.5)%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.color%20%3D%20%22white%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.padding%20%3D%20%2210px%22%3B%0A%20%20%20%20%20%20%20%20indicatorContainer.style.zIndex%20%3D%20%229999%22%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(indicatorContainer)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Inline%20styles%0A%20%20%20%20var%20inlineStyles%20%3D%20document.createElement('style')%3B%0A%20%20%20%20inlineStyles.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20.focus-calculator%20dt%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%205px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.focus-calculator%20dd%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.pass%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20green%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%202px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.fail%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20red%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%202px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%60%3B%0A%20%20%20%20document.head.appendChild(inlineStyles)%3B%0A%0A%20%20%20%20%2F%2F%20Function%20to%20calculate%20the%20minimum%20expected%20perimeter%20area%20of%20the%20element%0A%20%20%20%20function%20calculateMinPerimeterArea(element)%20%7B%0A%20%20%20%20%20%20%20%20var%20largerWidth%20%3D%20element.offsetWidth%20%2B%202%3B%20%2F%2F%20Adding%202px%20for%201px%20larger%20on%20all%20sides%0A%20%20%20%20%20%20%20%20var%20largerHeight%20%3D%20element.offsetHeight%20%2B%202%3B%20%2F%2F%20Adding%202px%20for%201px%20larger%20on%20all%20sides%0A%20%20%20%20%20%20%20%20var%20smallerWidth%20%3D%20element.offsetWidth%20-%202%3B%20%2F%2F%20Subtracting%202px%20for%201px%20smaller%20on%20all%20sides%0A%20%20%20%20%20%20%20%20var%20smallerHeight%20%3D%20element.offsetHeight%20-%202%3B%20%2F%2F%20Subtracting%202px%20for%201px%20smaller%20on%20all%20sides%0A%20%20%20%20%20%20%20%20var%20largerArea%20%3D%20largerWidth%20*%20largerHeight%3B%0A%20%20%20%20%20%20%20%20var%20smallerArea%20%3D%20smallerWidth%20*%20smallerHeight%3B%0A%20%20%20%20%20%20%20%20var%20minPerimeterArea%20%3D%20largerArea%20-%20smallerArea%3B%0A%20%20%20%20%20%20%20%20return%20minPerimeterArea.toFixed(0)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Function%20to%20calculate%20the%20actual%20perimeter%20area%20of%20the%20element%20with%20outline%20and%20outline%20offset%0A%20%20%20%20function%20calculateActualPerimeterArea(element)%20%7B%0A%20%20%20%20%20%20%20%20var%20outlineWidth%20%3D%20getOutlineWidth(element)%3B%0A%20%20%20%20%20%20%20%20var%20outlineOffset%20%3D%20outlineWidth%20%3E%200%20%3F%20getOutlineOffset(element)%20%3A%200%3B%0A%20%20%20%20%20%20%20%20var%20largerWidth%20%3D%20element.offsetWidth%20%2B%20outlineWidth%20%2B%20outlineOffset%3B%20%2F%2F%20Adding%20outline%20width%20and%20offset%0A%20%20%20%20%20%20%20%20var%20largerHeight%20%3D%20element.offsetHeight%20%2B%20outlineWidth%20%2B%20outlineOffset%3B%20%2F%2F%20Adding%20outline%20width%20and%20offset%0A%20%20%20%20%20%20%20%20var%20smallerWidth%20%3D%20element.offsetWidth%20-%20outlineWidth%20-%20outlineOffset%3B%20%2F%2F%20Subtracting%20outline%20width%20and%20offset%0A%20%20%20%20%20%20%20%20var%20smallerHeight%20%3D%20element.offsetHeight%20-%20outlineWidth%20-%20outlineOffset%3B%20%2F%2F%20Subtracting%20outline%20width%20and%20offset%0A%20%20%20%20%20%20%20%20var%20largerArea%20%3D%20largerWidth%20*%20largerHeight%3B%0A%20%20%20%20%20%20%20%20var%20smallerArea%20%3D%20smallerWidth%20*%20smallerHeight%3B%0A%20%20%20%20%20%20%20%20var%20actualPerimeterArea%20%3D%20largerArea%20-%20smallerArea%3B%0A%20%20%20%20%20%20%20%20if%20(actualPerimeterArea%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22No%20outline%20set%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20actualPerimeterArea.toFixed(0)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Function%20to%20temporarily%20focus%20on%20an%20element%20to%20obtain%20the%20outline%20width%0A%20%20%20%20function%20getOutlineWidth(element)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20the%20original%20focus%20state%20and%20style%0A%20%20%20%20%20%20%20%20var%20originalFocusState%20%3D%20element.getAttribute('data-focus-state')%3B%0A%20%20%20%20%20%20%20%20var%20originalOutlineStyle%20%3D%20element.style.outline%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20focus%0A%20%20%20%20%20%20%20%20element.focus()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20computed%20outline%20width%0A%20%20%20%20%20%20%20%20var%20computedStyle%20%3D%20window.getComputedStyle(element)%3B%0A%20%20%20%20%20%20%20%20var%20outlineWidth%20%3D%20parseInt(computedStyle.getPropertyValue('outline-width').replace('px'%2C%20'')%2C%2010)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Restore%20the%20original%20focus%20state%20and%20style%0A%20%20%20%20%20%20%20%20if%20(originalFocusState%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.removeAttribute('data-focus-state')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.blur()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.setAttribute('data-focus-state'%2C%20originalFocusState)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20element.style.outline%20%3D%20originalOutlineStyle%3B%0A%0A%20%20%20%20%20%20%20%20return%20outlineWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Function%20to%20temporarily%20focus%20on%20an%20element%20to%20obtain%20the%20outline%20offset%0A%20%20%20%20function%20getOutlineOffset(element)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20the%20original%20focus%20state%20and%20style%0A%20%20%20%20%20%20%20%20var%20originalFocusState%20%3D%20element.getAttribute('data-focus-state')%3B%0A%20%20%20%20%20%20%20%20var%20originalOutlineStyle%20%3D%20element.style.outlineOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20focus%0A%20%20%20%20%20%20%20%20element.focus()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20computed%20outline%20offset%0A%20%20%20%20%20%20%20%20var%20computedStyle%20%3D%20window.getComputedStyle(element)%3B%0A%20%20%20%20%20%20%20%20var%20outlineOffset%20%3D%20parseInt(computedStyle.getPropertyValue('outline-offset').replace('px'%2C%20'')%2C%2010)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Restore%20the%20original%20focus%20state%20and%20style%0A%20%20%20%20%20%20%20%20if%20(originalFocusState%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.removeAttribute('data-focus-state')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.blur()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.setAttribute('data-focus-state'%2C%20originalFocusState)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20element.style.outlineOffset%20%3D%20originalOutlineStyle%3B%0A%0A%20%20%20%20%20%20%20%20return%20outlineOffset%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Function%20to%20create%20the%20list%20of%20focusable%20elements%20and%20their%20calculations%0A%20%20%20%20function%20createIndicatorList()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Clear%20existing%20content%0A%20%20%20%20%20%20%20%20if%20(indicatorContainer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20indicatorContainer.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20indicator%20container%20if%20it%20doesn't%20exist%0A%20%20%20%20%20%20%20%20if%20(!indicatorContainer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20createIndicatorContainer()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Find%20all%20focusable%20elements%0A%20%20%20%20%20%20%20%20var%20focusableElements%20%3D%20document.querySelectorAll('a%2C%20button%2C%20input%2C%20select%2C%20textarea%2C%20%5Btabindex%5D%3Anot(%5Btabindex%3D%22-1%22%5D)')%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Iterate%20over%20focusable%20elements%0A%20%20%20%20%20%20%20%20focusableElements.forEach(function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20minPerimeterArea%20%3D%20calculateMinPerimeterArea(element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20actualPerimeterArea%20%3D%20calculateActualPerimeterArea(element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20passFailClass%20%3D%20actualPerimeterArea%20%3D%3D%3D%20%22No%20outline%20set%22%20%3F%20%22fail%22%20%3A%20(parseFloat(actualPerimeterArea)%20%3E%3D%20parseFloat(minPerimeterArea)%20%3F%20%22pass%22%20%3A%20%22fail%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20a%20list%20item%20for%20each%20focusable%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20tagName%20%3D%20element.tagName.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20listItem%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listItem.className%20%3D%20%22focus-calculator%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20heading%20%3D%20document.createElement('h2')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20elementTag%20%3D%20document.createElement('span')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20elementTag.textContent%20%3D%20tagName%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20passFailText%20%3D%20document.createElement('small')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20passFailText.textContent%20%3D%20actualPerimeterArea%20%3D%3D%3D%20%22No%20outline%20set%22%20%3F%20%22Fail%22%20%3A%20(parseFloat(actualPerimeterArea)%20%3E%3D%20parseFloat(minPerimeterArea)%20%3F%20%22Pass%22%20%3A%20%22Fail%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20passFailText.classList.add(passFailClass)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20heading.appendChild(elementTag)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20heading.appendChild(document.createTextNode(%22%20-%20%22))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20heading.appendChild(passFailText)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listItem.appendChild(heading)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dl%20%3D%20document.createElement('dl')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dt1%20%3D%20document.createElement('dt')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dt1.textContent%20%3D%20tagName.toUpperCase()%20%2B%20%22%20Content%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dd1%20%3D%20document.createElement('dd')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dd1.textContent%20%3D%20element.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dt2%20%3D%20document.createElement('dt')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dt2.textContent%20%3D%20%22Minimum%20Focus%20Area%3A%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dd2%20%3D%20document.createElement('dd')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dd2.textContent%20%3D%20minPerimeterArea%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dt3%20%3D%20document.createElement('dt')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dt3.textContent%20%3D%20%22Actual%20Focus%20Area%3A%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dd3%20%3D%20document.createElement('dd')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dd3.textContent%20%3D%20actualPerimeterArea%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dt1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dd1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dt2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dd2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dt3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dl.appendChild(dd3)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20listItem.appendChild(dl)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20indicatorContainer.appendChild(listItem)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Function%20to%20handle%20bookmarklet%20click%0A%20%20%20%20function%20bookmarkletClick()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!indicatorContainer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20createIndicatorList()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20indicatorContainer.remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20indicatorContainer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20click%20event%20listener%20to%20the%20bookmarklet%20itself%0A%20%20%20%20document.body.addEventListener('click'%2C%20bookmarkletClick)%3B%0A%0A%20%20%20%20%2F%2F%20Show%20indicators%20immediately%20after%20clicking%20the%20bookmarklet%0A%20%20%20%20bookmarkletClick()%3B%0A%0A%7D)()%3B%7D)()%3B">Focus Faux Pas</a></p>

    <p>Then, when you're on a webpage, click the bookmarklet to activate Focus Faux Pas and see the results!</p>

<p>To remove the results refresh your page.</p>

    <hr>

    <p>Let Focus Faux Pas be your guide to accessibility excellence! Happy coding! 🚀</p>
</body>

</html>
